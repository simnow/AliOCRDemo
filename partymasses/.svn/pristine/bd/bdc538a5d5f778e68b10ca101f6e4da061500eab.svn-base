<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.partymasses.modules.dao.ex.mapper.NewsExMapper" >

 	<resultMap id="BaseResultMap" type="com.partymasses.modules.dao.mybatis.entity.News">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 29 14:18:54 CST 2018.
    -->
    <id column="Id" jdbcType="INTEGER" property="id" />
    <result column="PublishUser" jdbcType="INTEGER" property="publishuser" />
    <result column="NewsTitle" jdbcType="VARCHAR" property="newstitle" />
    <result column="NewsAuthor" jdbcType="VARCHAR" property="newsauthor" />
    <result column="NewsType" jdbcType="VARCHAR" property="newstype" />
    <result column="CreateTime" jdbcType="TIMESTAMP" property="createtime" />
    <result column="CreateUser" jdbcType="INTEGER" property="createuser" />
    <result column="UpdateTime" jdbcType="TIMESTAMP" property="updatetime" />
    <result column="UpdateUser" jdbcType="INTEGER" property="updateuser" />
    <result column="UnitId" jdbcType="INTEGER" property="unitid" />
    <result column="PublishTime" jdbcType="TIMESTAMP" property="publishtime" />
    <result column="ReadCount" jdbcType="INTEGER" property="readcount" />
    <result column="GoodCount" jdbcType="INTEGER" property="goodcount" />
  </resultMap>
	<resultMap id="ResultMapWithBLOBs" type="com.partymasses.modules.dao.mybatis.entity.NewsWithBLOBs" extends="BaseResultMap" >
	    <!--
	      WARNING - @mbggenerated
	      This element is automatically generated by MyBatis Generator, do not modify.
	      This element was generated on Tue Mar 27 09:31:46 CST 2018.
	    -->
	    <result column="NewsContent" property="newscontent" jdbcType="LONGVARCHAR" />
	    <result column="NewSImg" property="newsimg" jdbcType="LONGVARBINARY" />
  	</resultMap>
	  <select id="selectAll" resultMap="ResultMapWithBLOBs">
	  	select * from news order by createtime desc
	  </select>
	  
	  <update id="updateNewReadCount">
	  	update news  set ReadCount=ReadCount+1 where id=#{Id,jdbcType=INTEGER} 
	  </update>
	  
	  <update id="updateNewGoodsCount">
	  	update news  set GoodCount=GoodCount+1 where id=#{Id,jdbcType=INTEGER} 
	  </update>
</mapper>