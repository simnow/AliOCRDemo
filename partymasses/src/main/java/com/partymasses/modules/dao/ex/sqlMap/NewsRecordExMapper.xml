<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.partymasses.modules.dao.ex.mapper.NewsRecordExMapper">
  <resultMap id="BaseResultMap" type="com.partymasses.modules.dao.mybatis.entity.NewsRecord">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Mar 29 10:04:13 CST 2018.
    -->
    <id column="Id" jdbcType="INTEGER" property="id" />
    <result column="NewsId" jdbcType="INTEGER" property="newsid" />
    <result column="Type" jdbcType="INTEGER" property="type" />
    <result column="UnitId" jdbcType="INTEGER" property="unitid" />
    <result column="UserId" jdbcType="INTEGER" property="userid" />
    <result column="CreateTime" jdbcType="TIMESTAMP" property="createtime" />
  </resultMap>
  
  	<insert id="insertNewRecord" parameterType="com.partymasses.modules.dao.mybatis.entity.NewsRecord">
  		insert into news_record(NewsId,Type,UnitId,UserId,CreateTime) 
		SELECT #{newsrecord.newsid}, #{newsrecord.type}, #{newsrecord.unitid},#{newsrecord.userid}, #{newsrecord.createtime} FROM DUAL 
		WHERE NOT EXISTS(SELECT userid,type,newsid FROM news_record 
		WHERE userid = #{newsrecord.userid} and type= #{newsrecord.type} and newsid=#{newsrecord.newsid})
  	</insert>
</mapper>